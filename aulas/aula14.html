<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥dulo 14 - Prepara√ß√£o Final | Telecurso</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            --azul-marinho: #002347;
            --azul-royal: #0056b3;
            --ouro: #ffcc00;
            --sucesso: #28a745;
            --branco: #ffffff;
            --alerta: #e67e22;
        }
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            line-height: 1.8; 
            padding: 40px 20px; 
            max-width: 850px; 
            margin: auto; 
            background: var(--azul-marinho); 
            color: #f4f4f4;
        }
        .congratulations-card { 
            background: var(--branco); 
            color: #333; 
            padding: 50px; 
            border-radius: 20px; 
            box-shadow: 0 15px 50px rgba(0,0,0,0.3); 
            text-align: center;
            border-bottom: 10px solid var(--ouro);
        }
        .star-icon { font-size: 60px; color: var(--ouro); margin-bottom: 20px; }
        h1 { color: var(--azul-marinho); font-size: 2.5rem; margin-top: 0; }
        h2 { color: var(--azul-royal); margin-top: 35px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        p { margin-bottom: 20px; text-align: left; }
        
        .aviso-prova {
            background: #fff3cd;
            border: 2px solid var(--ouro);
            color: #856404;
            padding: 20px;
            border-radius: 10px;
            margin: 30px 0;
            text-align: left;
        }

        .checklist-final {
            background: #eef9f1;
            padding: 25px;
            border-radius: 12px;
            text-align: left;
            margin: 30px 0;
        }
        .checklist-final ul { list-style: none; padding: 0; }
        .checklist-final li { margin-bottom: 12px; display: flex; align-items: center; }
        .checklist-final li::before { content: '‚úì'; color: var(--sucesso); font-weight: bold; margin-right: 10px; }

        .btn-prova { 
            background: var(--azul-royal); 
            color: white; 
            border: none; 
            padding: 22px 40px; 
            border-radius: 10px; 
            cursor: pointer; 
            font-size: 1.3rem; 
            font-weight: bold;
            width: 100%; 
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0, 86, 179, 0.3);
            text-transform: uppercase;
        }
        .btn-prova:hover { 
            background: var(--azul-marinho); 
            transform: scale(1.02);
        }
    </style>
</head>
<body>

    <div class="congratulations-card">
        <div class="star-icon">üìö</div>
        <h1>Quase l√°, T√©cnico!</h1>
        
        <p>Voc√™ concluiu todos os 14 m√≥dulos te√≥ricos e pr√°ticos do <strong>Telecurso: Montagem de Computadores</strong>. Mas, para garantir o selo de qualidade e a emiss√£o do seu certificado, voc√™ deve enfrentar o <strong>Exame de Certifica√ß√£o Final</strong>.</p>

        <div class="aviso-prova">
            <strong>‚ö†Ô∏è Aten√ß√£o sobre a Prova Final:</strong>
            <ul>
                <li>A prova abrange conte√∫dos de todos os m√≥dulos.</li>
                <li>√â necess√°rio atingir uma nota m√≠nima (ex: 70%) para aprova√ß√£o.</li>
                <li>Leia as quest√µes com aten√ß√£o; elas simulam problemas reais do dia a dia.</li>
            </ul>
        </div>

        <h2>Recapitulando sua Jornada</h2>
        <div class="checklist-final">
            <h3>üîç Voc√™ revisou:</h3>
            <ul>
                <li>Arquitetura de Processadores e Chipsets.</li>
                <li>Instala√ß√£o f√≠sica de Mem√≥ria RAM e Armazenamento.</li>
                <li>Gerenciamento t√©rmico e fluxo de ar.</li>
                <li>Configura√ß√£o de BIOS/UEFI e Particionamento.</li>
            </ul>
        </div>

        <p>Sinta-se livre para voltar aos m√≥dulos anteriores caso queira revisar algum detalhe. Se estiver pronto, clique no bot√£o abaixo para iniciar o exame.</p>

        <button class="btn-prova" onclick="iniciarProvaFinal()">
            INICIAR PROVA FINAL DE CERTIFICA√á√ÉO
        </button>
    </div>

    <script>
        const SUPABASE_URL = 'https://ityqcemfbdzgsfmyisqc.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_p6rMiOpEoL6smdIXgOaclQ_TNK0MwNA';
        const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function iniciarProvaFinal() {
            try {
                const { data: { user } } = await _supabase.auth.getUser();
                if(!user) return alert("Sess√£o expirada! Fa√ßa login novamente.");

                // Registra que o aluno chegou ao final do curso (M√≥dulo 14) 
                // para liberar o acesso √† prova no banco de dados, se necess√°rio.
                await _supabase.from('progresso_alunos').upsert({ 
                    user_id: user.id, 
                    modulo_id: 14 
                });

                // Redireciona para a p√°gina da prova final
                // Certifique-se de que o nome do arquivo da prova seja este:
                window.location.href = '../prova-final.html';
                
            } catch (e) {
                console.error(e);
                alert("Erro ao processar solicita√ß√£o. Verifique sua conex√£o.");
            }
        }
    </script>
</body>
</html>